# kiosk

# Установка системы:
  * F8 - выбираем флешку в качестве источника
  * Wellcome: Русский язык > Установить Ubuntu **(Ставим версию ^23)**
  * Клавиатура: English (US)
  * Подключаемся к сети
  * Минимальная установка + Установить стороннее ПО для графики
  * Стереть диск и установить Ubuntu > Установить сейчас > Продолжить
  * Москва
  * Пользователь:
    - Имя: synapse
    - Компьютер: synapse-kiosk-1
    - Пользователь: synapse
    - Пароль: _задаем пароль_
    - Входить в систему автоматически
  * Ждём *** мин > Перезагрузить

# Ubuntu install First RUN
  * Подключение сетевых учётных записей > Пропустить > Далее
  * В терминале переходим в root юзера, для этого пишем: sudo su
  Далее по очереди вводим команды (ждем установки каждой, по окончанию выведется строка состояния):
  * `apt install -y openssh-server net-tools git`
  * `cd /opt && git clone https://git.synapse-studio.ru/d-org/synkiosk.git`
  * `cd kiosk && ./install.sh`
  * `./console.php kiosk:install`
  * `./console.php kiosk:restore ***` (Example: ./console.php kiosk:restore https://docker-bcp-weekly.storage.yandexcloud.net/bcp-w-10158-t-pos.2023-10-11-17-03-58.tar.gz)  _ (https://hosting.biz-panel.com/node/10158)_

# Disable Guestures
  * `su synapse`
    - Запускать следующую команду надо именно под юзером на котором будет загружен киоск
    - Запускать надо не удаленно, а прямо в терминале на киоске
  * `gnome-extensions install /opt/kiosk/assets/disable-gestures-2021verycrazydog.gmail.com.v4.shell-extension.zip`
    - так инсталируется плагин
  * Перезагрузиться!
  * `gnome-extensions enable disable-gestures-2021@verycrazydog.gmail.com`
    - после выполнения экраны не должны "листаться"
    - плагины можно посмотреть в "Gnome Extensions"
  * Если плагин нужно выключить, то:
    - `gnome-extensions disable disable-gestures-2021@verycrazydog.gmail.com`

# Кнопка "Reboot"
  * Правой кнопкой мыши открыть контекстное меню
  * * Разрешить запускать команду

# Settings
  * Bluetooth: OFF
  * Уведомления: Выкл
  * Поиск: Выкл
  * Конфидециальность > Блокировка
    - Задержка выключения экрана: Никогда
    - Автоматическая блокировка: Выкл
    - Блокировка экрана в режиме ожидания: Выкл
  * Общий доступ: имя компьютера можно поменять при желании
  * Питание:
    - Яркость: 100%
    - Уменьшить яркость при простое: Откл
  * Сменные носители: ничего не делать и не спрашивать
  * Источники ввода: Добавить Русскую раскладку и сделать её первой
  * Многозадачность:
    - Активные границы экрана: Откл
    - Рабочие столы: кол-во рабочих столов = 1
  * Рабочий стол:
    - Иконка корзины на рабочем столе: Откл

# FFox Настройки
  * Настройки:
    - Начало:
      - Домашняя страница: http://localhost в новых вкладках "пустая"
      - Снимаем все галочки со всего содержимого домашней страницы
    - Поиск:
      - убираем предложения
      - отключаем поиски кроме яндекса и/или гугла
    - Приватность:
      - Строгая
      - Удалять куки и данные при закрытии FFox
      - Запрашивать сохранение паролей = Нет
      - История = Не запоминать
      - Адресная строка: всё убираем
      - Запретить службам поддержки = Да
      - Отключить технические данные

# Chromium Настройки
  * Сервисы гугл всё выключить
  * Автозаполнение и пароли > Менеджер паролей > Настройки:
    - Предлагать сохранение паролей = Нет
    - Автоматический вход = Нет
  * Конфиденциальность
    - Отключам разрешение проверки способов оплаты
  * Поисковая систем: удаляем лишние
  * Открывать заданные страницы при запуске: http://localhost
  * Добавляем http://localhost в избранное
  * Настройки > Расширения
    - Установить расширение "Virtual Keyboard" по ссылке:
    - https://chrome.google.com/webstore/detail/virtual-keyboard/pflmllfnnabikmfkkaddkoolinlfninn
    - Разрешить использование в режиме инкогнито = Да
    - Перейти в "Параметры расширений" расширения
      - Добавить русскую раскладку клавиатуры
      - Сделать её первой
      - Перезагрузить браузер

# Утилиты > Дополнительные настройки (Gnome Tweak Tool)
  * Заголовки окон
    - Двойное нажатие = Нет
    - Нажатие средней кнопки мыши = Нет
    - Второе нажатие = Нет
    - Кнопки заголовка окна = Выкл
  * Клавиатура и мышь
    - Вставка при нажатии средней кнопки = Нет
    - Эмуляци нажатия мышкой = Нет

# Отправка писем с сайта
  * Настроить модуль Smpt
    - /admin/config/system/smtp
      - Далее следуйте инструкциям вашего почтового сервиса.

# Решение проблем:
  * UFW
    - `ufw disable && apt remove ufw -y && apt autoremove -y`
  * Перезагрузить киоск
    - Нажать на рабочем столе иконку "Reboot"
  * Выполнить Drush-команду
    - в терминале `docker exec -it php bash`
    - `cd /var/www/html/ && drush`
  * Развернуть сайт из нового бэкапа
    - `./console.php kiosk:restore ***` (Example: ./console.php kiosk:restore https://docker-bcp-weekly.storage.yandexcloud.net/bcp-w-10158-t-pos.2023-09-18-10-38-05.tar.gz)

# Требования к хостингу
Веб-приложение разворачивается из открытой библиотеки на облачном хостинге, со следующей конфигурацией:
• память - от 512 МБ
• процессор - от 1 ядра
• дисковое пространство- от 250 МБ

# Параметры серверов и сетей:
• Страна размещения сервера: Россия
• CPU: от 1GHz
• SSD RAID1

# Для функционирования сайта необходимо следующее программное обеспечение:
• Операционная система: Linux
• Веб сервер: Nginx 1.10+ или Apache 2.4+
• База данных: MySQL 8+ / Mariadb 10.1+ / SQLite 3.x
• PHP 8.1+
• Место на диске: 500Mb+
• Настройки PHP:
   - register_globals off
   - safe_mode off
   - session.save_handler user
   - session.cache_limiter nocache
   - error_reporting E_ALL
   - php_memory_limit не менее 100мб, но лучше 500Mb+
   - The standard PHP extensions (enabled by default) Hash and JSON are required
   - PDO support

# Параметры окружения (LAMP):
• PHP 8+
• MariaDB 10.5.x / MySQL 5.6+
• Доступ по SSH/SFTP/FTP
• phpMyAdmin или adminer
• Drush
• Drupal Console
• Composer
• Git
• NodeJS (NPM, Gulp)
